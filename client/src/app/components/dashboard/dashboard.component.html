<div class="dashboard">
  <!-- Page Title -->
  <div class="page-header">
    <h1 class="page-title">דשבורד</h1>
    <p class="page-subtitle">מצב המערכת והחיבורים בזמן אמת</p>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <!-- WhatsApp Status -->
    <div class="card stat-card" [class]="getStatusClass()">
      <div class="stat-header">
        <div class="stat-icon wa"><i class='bx bxl-whatsapp'></i></div>
        <span class="stat-label">WhatsApp</span>
      </div>
      <div class="stat-value">{{ getStatusLabel() }}</div>
      @if (socket.waStatus() === 'ready') {
      <div class="stat-badge badge-green">פעיל</div>
      }
    </div>

    <!-- Queue -->
    <div class="card stat-card" [class.has-items]="socket.queueCount() > 0">
      <div class="stat-header">
        <div class="stat-icon queue"><i class='bx bx-list-ol'></i></div>
        <span class="stat-label">תור הודעות</span>
      </div>
      <div class="stat-value stat-number">{{ socket.queueCount() }}</div>
      @if (socket.queueCount() > 0) {
      <div class="stat-badge badge-amber">{{ socket.queueCount() }} ממתינות</div>
      }
    </div>

    <!-- Forwarded -->
    <div class="card stat-card">
      <div class="stat-header">
        <div class="stat-icon stats"><i class='bx bx-bar-chart-alt-2'></i></div>
        <span class="stat-label">הועברו</span>
      </div>
      <div class="stat-value stat-number">{{ stats()?.totalForwarded ?? 0 }}</div>
    </div>

    <!-- Errors -->
    <div class="card stat-card" [class.has-errors]="(stats()?.totalErrors ?? 0) > 0">
      <div class="stat-header">
        <div class="stat-icon error"><i class='bx bx-error'></i></div>
        <span class="stat-label">שגיאות</span>
      </div>
      <div class="stat-value stat-number error-count">{{ stats()?.totalErrors ?? 0 }}</div>
    </div>
  </div>

  <!-- QR Code -->
  @if (socket.qrCode()) {
  <div class="card qr-card">
    <div class="qr-info">
      <h2>סריקת QR</h2>
      <p class="qr-hint">פתח WhatsApp → ⋮ → מכשירים מקושרים → קשר מכשיר</p>
    </div>
    <div class="qr-container">
      <img [src]="socket.qrCode()!" alt="QR Code" class="qr-image" />
    </div>
  </div>
  }
</div>